# ============================================================================
# CAMPAIGN TARGET - Target setting and progress tracking
# ============================================================================

"""
Target status enumeration.
"""
enum TargetStatus {
  """
  Target has not been started yet
  """
  NOT_STARTED

  """
  Target is currently in progress
  """
  IN_PROGRESS

  """
  Target has been achieved
  """
  ACHIEVED

  """
  Target has failed
  """
  FAILED
}

"""
Target progress information.
"""
type TargetProgress {
  """
  Target value
  """
  targetValue: Float!

  """
  Current achieved value
  """
  currentValue: Float!

  """
  Achievement percentage
  """
  achievementPercentage: Float!

  """
  Is target achieved
  """
  isAchieved: Boolean!

  """
  Remaining value to achieve target
  """
  remainingValue: Float!
}

"""
Complete campaign target representation.
"""
type TargetOutput {
  """
  Target ID
  """
  id: ID!

  """
  Campaign ID
  """
  campaignId: ID!

  """
  Metric name
  """
  metricName: String!

  """
  Metric type
  """
  metricType: MetricType!

  """
  Measurement unit (e.g., USD, leads, %)
  """
  measurementUnit: String!

  """
  Target value to achieve
  """
  status: String!

  """
  Progress information
  """
  progress: TargetProgress!

  """
  Creation date
  """
  createdAt: String!

  """
  Last update date
  """
  updatedAt: String!
}

"""
Target metric breakdown by type.
"""
type TargetMetricBreakdown {
  """
  Number of revenue targets
  """
  revenueTargets: Int!

  """
  Number of leads targets
  """
  leadsTargets: Int!

  """
  Number of conversion targets
  """
  conversionsTargets: Int!

  """
  Number of click targets
  """
  clicksTargets: Int!

  """
  Number of impression targets
  """
  impressionsTargets: Int!

  """
  Number of engagement targets
  """
  engagementTargets: Int!

  """
  Number of reach targets
  """
  reachTargets: Int!

  """
  Number of custom targets
  """
  customTargets: Int!
}

"""
Individual target progress detail.
"""
type TargetProgressDetail {
  """
  Target ID
  """
  targetId: ID!

  """
  Metric name
  """
  metricName: String!

  """
  Metric type
  """
  metricType: String!

  """
  Target value
  """
  targetValue: Float!

  """
  Current value
  """
  currentValue: Float!

  """
  Achievement percentage
  """
  achievementPercentage: Float!

  """
  Is achieved
  """
  isAchieved: Boolean!

  """
  Measurement unit
  """
  measurementUnit: String!
}

"""
Campaign target statistics.
"""
type TargetStatisticsOutput {
  """
  Campaign ID
  """
  campaignId: ID!

  """
  Campaign name
  """
  campaignName: String

  """
  Total number of targets
  """
  totalTargets: Int!

  """
  Number of achieved targets
  """
  achievedTargets: Int!

  """
  Number of unachieved targets
  """
  unachievedTargets: Int!

  """
  Achievement rate percentage
  """
  achievementRate: Float!

  """
  Average achievement percentage
  """
  averageAchievementPercentage: Float!

  """
  Breakdown by metric type
  """
  metricBreakdown: TargetMetricBreakdown!

  """
  Progress details for each target
  """
  targetProgress: [TargetProgressDetail!]!
}

"""
Paginated target response.
"""
type TargetPage implements PageResponse {
  """
  List of targets
  """
  items: [TargetOutput!]!

  """
  Pagination metadata
  """
  pagination: PaginationMetadata!
}

"""
Input to create a campaign target.
"""
input CreateTargetInput {
  """
  Campaign ID
  """
  campaignId: ID!

  """
  Metric name
  """
  metricName: String!

  """
  Metric type
  """
  metricType: MetricType!

  """
  Target value to achieve
  """
  targetValue: Float!

  """
  Measurement unit
  """
  measurementUnit: String!
}

"""
Input to update a campaign target.
"""
input UpdateTargetInput {
  """
  Target ID
  """
  id: ID!

  """
  Metric name
  """
  metricName: String

  """
  Metric type
  """
  metricType: MetricType

  """
  Target value to achieve
  """
  targetValue: Float

  """
  Measurement unit
  """
  measurementUnit: String
}

"""
Input to update target progress.
"""
input UpdateTargetProgressInput {
  """
  Target ID
  """
  targetId: ID!

  """
  Current achieved value
  """
  currentValue: Float!
}

"""
Input to change target status.
"""
input TargetStatusChangeInput {
  """
  Target ID
  """
  targetId: ID!

  """
  New status
  """
  status: TargetStatus!

  """
  Reason for status change
  """
  reason: String
}

"""
Input to recalculate target progress.
"""
input RecalculateTargetInput {
  """
  Target ID
  """
  targetId: ID!
}

"""
Input to delete a target.
"""
input DeleteTargetInput {
  """
  Target ID
  """
  targetId: ID!

  """
  Perform hard delete (permanent)
  """
  hardDelete: Boolean!
}

"""
Campaign target filter options.
"""
input TargetFilterInput {
  """
  Filter by campaign ID
  """
  campaignId: ID

  """
  Filter by metric types
  """
  metricTypes: [MetricType!]

  """
  Filter by achievement status
  """
  isAchieved: Boolean

  """
  Filter by minimum target value
  """
  minTargetValue: Float

  """
  Filter by maximum target value
  """
  maxTargetValue: Float

  """
  Filter by minimum current value
  """
  minCurrentValue: Float

  """
  Filter by maximum current value
  """
  maxCurrentValue: Float

  """
  Filter by minimum achievement percentage
  """
  minAchievementPercentage: Float

  """
  Filter by maximum achievement percentage
  """
  maxAchievementPercentage: Float

  """
  Search term
  """
  searchTerm: String
}

# ============================================================================
# QUERIES
# ============================================================================

extend type Query {
  """
  Get a campaign target by ID.
  """
  target(id: ID!): TargetOutput

  """
  Search campaign targets with filters.
  """
  searchTargets(
    """
    Filter options
    """
    filter: TargetFilterInput

    """
    Pagination parameters
    """
    pageInput: PageInput!
  ): TargetPage!

  """
  Get targets by campaign.
  """
  targetsByCampaign(
    """
    Campaign ID
    """
    campaignId: ID!

    """
    Pagination parameters
    """
    pageInput: PageInput!
  ): TargetPage!

  """
  Get achieved targets for a campaign.
  """
  achievedTargets(
    """
    Campaign ID
    """
    campaignId: ID!

    """
    Pagination parameters
    """
    pageInput: PageInput!
  ): TargetPage!

  """
  Get unachieved targets for a campaign.
  """
  unachievedTargets(
    """
    Campaign ID
    """
    campaignId: ID!

    """
    Pagination parameters
    """
    pageInput: PageInput!
  ): TargetPage!

  """
  Get unachieved targets by metric type.
  """
  unachievedTargetsByMetricType(
    """
    Metric type
    """
    metricType: MetricType!

    """
    Pagination parameters
    """
    pageInput: PageInput!
  ): TargetPage!

  """
  Get a specific target by metric name.
  """
  targetByMetricName(
    """
    Campaign ID
    """
    campaignId: ID!

    """
    Metric name
    """
    metricName: String!
  ): TargetOutput

  """
  Get target statistics for a campaign.
  """
  targetStatistics(campaignId: ID!): TargetStatisticsOutput!

  """
  Get achievement rate for a campaign.
  """
  targetAchievementRate(campaignId: ID!): Float!

  """
  Get average achievement percentage.
  """
  averageAchievementPercentage(campaignId: ID!): Float!

  """
  Count achieved targets for a campaign.
  """
  countAchievedTargets(campaignId: ID!): Int!

  """
  Check if metric name is available for a campaign.
  """
  isTargetNameAvailable(
    """
    Campaign ID
    """
    campaignId: ID!

    """
    Metric name
    """
    metricName: String!
  ): Boolean!
}

# ============================================================================
# MUTATIONS
# ============================================================================

extend type Mutation {
  """
  Create a new campaign target.
  """
  createTarget(input: CreateTargetInput!): TargetOutput!

  """
  Update a campaign target.
  """
  updateTarget(input: UpdateTargetInput!): TargetOutput!

  """
  Update target progress/current value.
  """
  updateTargetProgress(input: UpdateTargetProgressInput!): TargetOutput!

  """
  Change target status.
  """
  changeTargetStatus(input: TargetStatusChangeInput!): TargetOutput!

  """
  Recalculate target progress and achievement status.
  """
  recalculateTarget(input: RecalculateTargetInput!): TargetOutput!

  """
  Delete a campaign target.
  """
  deleteTarget(input: DeleteTargetInput!): Boolean!
}
