# ============================================================================
# CAMPAIGN ACTIVITY - Activity planning and tracking
# ============================================================================

"""
Type of campaign activity.
"""
enum ActivityType {
    """Content creation activity"""
    CONTENT_CREATION

    """Ad setup activity"""
    AD_SETUP

    """Email blast activity"""
    EMAIL_BLAST

    """Social media post"""
    SOCIAL_POST

    """Event organization"""
    EVENT

    """Webinar"""
    WEBINAR

    """Analysis activity"""
    ANALYSIS

    """Optimization activity"""
    OPTIMIZATION
}

"""
Status of campaign activity.
"""
enum ActivityStatus {
    """Planned activity"""
    PLANNED

    """Activity in progress"""
    IN_PROGRESS

    """Completed activity"""
    COMPLETED

    """Cancelled activity"""
    CANCELLED

    """Blocked activity"""
    BLOCKED
}

"""
Activity schedule information.
"""
type ActivitySchedule {
    """Planned start date (ISO-8601)"""
    plannedStartDate: String

    """Planned end date (ISO-8601)"""
    plannedEndDate: String

    """Actual start date (ISO-8601)"""
    actualStartDate: String

    """Actual end date (ISO-8601)"""
    actualEndDate: String

    """Is activity delayed"""
    isDelayed: Boolean!

    """Is activity completed"""
    isCompleted: Boolean!

    """Planned duration in hours"""
    plannedDurationHours: Int

    """Actual duration in hours"""
    actualDurationHours: Int
}

"""
Activity cost information.
"""
type ActivityCost {
    """Planned cost"""
    plannedCost: Float

    """Actual cost"""
    actualCost: Float

    """Cost variance"""
    costVariance: Float

    """Cost overrun percentage"""
    costOverrunPercentage: Float

    """Is over budget"""
    isOverBudget: Boolean!
}

"""
Campaign activity details (graphQL representation matching CampaignActivityOutput DTO).
"""
type CampaignActivity {
    """Activity ID"""
    id: ID

    """Campaign ID"""
    campaignId: ID

    """Activity name"""
    name: String

    """Activity description"""
    description: String

    """Activity type"""
    activityType: ActivityType

    """Activity status"""
    status: ActivityStatus

    """Planned start date (ISO-8601)"""
    plannedStartDate: String

    """Planned end date (ISO-8601)"""
    plannedEndDate: String

    """Actual start date (ISO-8601)"""
    actualStartDate: String

    """Actual end date (ISO-8601)"""
    actualEndDate: String

    """Planned cost"""
    plannedCost: Float

    """Actual cost"""
    actualCost: Float

    """Target audience"""
    targetAudience: String

    """Dependencies (JSON)"""
    dependencies: String

    """Creation date (ISO-8601)"""
    createdAt: String

    """Last update date (ISO-8601)"""
    updatedAt: String
}

"""
Activity type breakdown for statistics.
"""
type ActivityTypeBreakdown {
    contentCreation: Int!
    adSetup: Int!
    emailBlast: Int!
    socialPost: Int!
    event: Int!
    webinar: Int!
    analysis: Int!
    optimization: Int!
}

"""
Activity time metrics.
"""
type ActivityTimeMetrics {
    averageCompletionTimeHours: Int!
    totalDelayHours: Int!
    activitiesCompletedEarly: Int!
    activitiesCompletedLate: Int!
    activitiesCompletedOnTime: Int!
}

"""
Comprehensive activity statistics (matches ActivityStatistics DTO).
"""
type ActivityStatistics {
    campaignId: ID!
    campaignName: String
    totalActivities: Int!
    plannedActivities: Int!
    inProgressActivities: Int!
    completedActivities: Int!
    cancelledActivities: Int!
    blockedActivities: Int!
    delayedActivities: Int!
    totalPlannedCost: Float
    totalActualCost: Float
    averageCostOverrun: Float
    completionRate: Float
    onTimeCompletionRate: Float
    typeBreakdown: ActivityTypeBreakdown
    timeMetrics: ActivityTimeMetrics
}

"""
Paginated activity response.
"""
type ActivityPage implements PageResponse {
    items: [CampaignActivity!]!
    pagination: PaginationMetadata!
}

# ============================================================================
# INPUTS
# ============================================================================

"""
Input to create an activity (matches `CreateCampaignActivityInput` Java record).
"""
input CreateCampaignActivityInput {
    campaignId: ID!
    name: String!
    description: String
    activityType: ActivityType!
    plannedStartDate: String!
    plannedEndDate: String!
    plannedCost: Float!
    assignedToUserId: ID
    deliveryChannel: String!
    successCriteria: String
    targetAudience: String
    dependencies: String
}

"""
Input to update an activity (matches `UpdateCampaignActivityInput` Java record).
"""
input UpdateCampaignActivityInput {
    id: ID!
    name: String
    description: String
    actualStartDate: String
    actualEndDate: String
    actualCost: Float
    assignedToUserId: ID
    successCriteria: String
    targetAudience: String
    activityType: ActivityType
    dependencies: String
}

"""
Input to update activity cost (matches `UpdateActivityCostInput`).
"""
input UpdateActivityCostInput {
    activityId: ID!
    actualCost: Float!
    costNotes: String
}

"""
Input to record activity dates (matches `RecordActivityDatesInput`).
"""
input RecordActivityDatesInput {
    activityId: ID!
    actualStartDate: String
    actualEndDate: String
}

"""
Search input (matches `SearchActivityInput` Java record used by the controller).
"""
input SearchActivityInput {
    campaignId: ID
    statuses: [ActivityStatus!]
    activityTypes: [ActivityType!]
    assignedToUserId: ID
    plannedStartFrom: String
    plannedStartTo: String
    isDelayed: Boolean
    isCompleted: Boolean
    searchTerm: String
}

# ============================================================================
# QUERIES
# ============================================================================

extend type Query {
    """
    Get an activity by ID (controller: `campaignActivity`).
    """
    campaignActivity(activityId: ID!): CampaignActivity

    """
    Search activities with filters (controller: `searchCampaignActivities`).
    """
    searchCampaignActivities(filter: SearchActivityInput, pageInput: PageInput!): ActivityPage!

    """
    Get activities by campaign and status (controller: `campaignActivitiesByCampaignAndByStatus`).
    """
    campaignActivitiesByCampaignAndByStatus(campaignId: ID!, status: ActivityStatus!, pageInput: PageInput!): ActivityPage!

    """
    Get activities by assigned user (controller: `campaignActivitiesByUser`).
    """
    campaignActivitiesByUser(userId: ID!, pageInput: PageInput!): ActivityPage!

    """
    Get delayed activities (controller: `delayedCampaignActivities`).
    """
    delayedCampaignActivities(pageInput: PageInput!): ActivityPage!

    """
    Get over-budget activities (controller: `overBudgetCampaignActivities`).
    """
    overBudgetCampaignActivities(pageInput: PageInput!): ActivityPage!

    """
    Get upcoming activities (controller: `upcomingCampaignActivities`).
    """
    upcomingCampaignActivities(pageInput: PageInput!): ActivityPage!

    """
    Get activity statistics for a campaign (controller: `campaignActivityStatistics`).
    """
    campaignActivityStatistics(campaignId: ID!): ActivityStatistics!

}

# ============================================================================
# MUTATIONS
# ============================================================================

extend type Mutation {
    createCampaignActivity(input: CreateCampaignActivityInput!): CampaignActivity!
    updateCampaignActivity(input: UpdateCampaignActivityInput!): CampaignActivity!
    updateCampaignActivityCost(input: UpdateActivityCostInput!): CampaignActivity!
    updateCampaignActivitySchedule(input: RecordActivityDatesInput!): CampaignActivity!
    startCampaignActivity(id: ID!): CampaignActivity!
    cancelCampaignActivity(id: ID!, cancelReason: String): CampaignActivity!
    completeCampaignActivity(id: ID!, completionNotes: String): CampaignActivity!
    blockCampaignActivity(id: ID!, blockReason: String): CampaignActivity!
    assignCampaignActivityToUser(id: ID!, userId: ID!): CampaignActivity!
    unassignCampaignActivity(id: ID!): CampaignActivity!
    deleteCampaignActivity(id: ID!): Boolean!
}