# ============================================================================
# CAMPAIGN METRIC - Metric tracking and performance measurement
# ============================================================================

"""
Metric type enumeration.
"""
enum MetricType {
    COUNT
    CURRENCY
    PERCENTAGE
    DURATION
    COST
    RATIO
    SCORE
}

"""
Complete campaign metric representation.
"""
type CampaignMetricOutput {
    """Metric ID"""
    id: ID!

    """Campaign ID"""
    campaignId: ID!

    """Metric name"""
    name: String!

    """Metric type"""
    metricType: String!

    """Metric description"""
    description: String

    """Current value"""
    currentValue: Float!

    """Target value"""
    targetValue: Float

    """Measurement unit (e.g., USD, leads, %)"""
    measurementUnit: String!

    """Calculation formula"""
    calculationFormula: String

    """Data source"""
    dataSource: String

    """Last calculated date"""
    lastCalculatedDate: String

    """Is automated metric"""
    isAutomated: Boolean!

    """Is target achieved"""
    isTargetAchieved: Boolean!

    """Achievement percentage"""
    achievementPercentage: Float!


    """Creation date"""
    createdAt: String!

    """Last update date"""
    updatedAt: String!
}

"""
Metric type breakdown by category.
"""
type MetricTypeBreakdown {
    """Number of count metrics"""
    countMetrics: Int!

    """Number of currency metrics"""
    currencyMetrics: Int!

    """Number of percentage metrics"""
    percentageMetrics: Int!

    """Number of duration metrics"""
    durationMetrics: Int!

    """Number of cost metrics"""
    costMetrics: Int!

    """Number of ratio metrics"""
    ratioMetrics: Int!

    """Number of score metrics"""
    scoreMetrics: Int!
}

"""
Performance distribution by achievement level.
"""
type PerformanceDistribution {
    """Exceeded target (> 100%)"""
    exceededTarget: Int!

    """Met target (= 100%)"""
    metTarget: Int!

    """Near target (80-99%)"""
    nearTarget: Int!

    """Below target (50-79%)"""
    belowTarget: Int!

    """Far below target (< 50%)"""
    farBelowTarget: Int!

    """Average achievement percentage"""
    averageAchievement: Float!
}

"""
Campaign metric statistics.
"""
type MetricStatistics {
    """Campaign ID"""
    campaignId: ID!

    """Campaign name"""
    campaignName: String

    """Total number of metrics"""
    totalMetrics: Int!

    """Number of achieved metrics"""
    achievedMetrics: Int!

    """Number of not achieved metrics"""
    notAchievedMetrics: Int!

    """Number of automated metrics"""
    automatedMetrics: Int!

    """Number of manual metrics"""
    manualMetrics: Int!

    """Achievement rate percentage"""
    achievementRate: Float!

    """Breakdown by metric type"""
    typeBreakdown: MetricTypeBreakdown!

    """Performance distribution"""
    performanceDistribution: PerformanceDistribution!
}

"""
Paginated metric response.
"""
type CampaignMetricPage implements PageResponse {
    """List of metrics"""
    items: [CampaignMetricOutput!]!

    """Pagination metadata"""
    pagination: PaginationMetadata!
}

"""
Input to create a campaign metric.
"""
input CreateMetricInput {
    """Campaign ID"""
    campaignId: ID!

    """Metric name"""
    name: String!

    """Metric type"""
    metricType: MetricType!

    """Metric description"""
    description: String

    """Target value"""
    targetValue: Float

    """Measurement unit"""
    measurementUnit: String!

    """Calculation formula"""
    calculationFormula: String

    """Data source"""
    dataSource: String

    """Is automated metric"""
    isAutomated: Boolean
}

"""
Input to update a campaign metric.
"""
input UpdateMetricInput {
    """Metric ID"""
    metricId: ID!

    """Metric description"""
    description: String

    """Target value"""
    targetValue: Float

    """Calculation formula"""
    calculationFormula: String

    """Data source"""
    dataSource: String
}

"""
Input to update metric value.
"""
input UpdateMetricValueInput {
    """Metric ID"""
    metricId: ID!

    """New value"""
    newValue: Float!
}

"""
Campaign metric filter options.
"""
input MetricQueryInput {
    """Filter by campaign ID"""
    campaignId: ID

    """Filter by metric type"""
    metricType: MetricType

    """Filter by automation status"""
    isAutomated: Boolean

    """Filter by target achievement status"""
    isTargetAchieved: Boolean

    """Search term for name"""
    searchTerm: String
}

"""
Campaign metric filter options (deprecated - use MetricQueryInput).
"""
input MetricFilterInput {
    """Filter by campaign ID"""
    campaignId: ID

    """Filter by metric types"""
    metricTypes: [MetricType!]

    """Filter by automation status"""
    isAutomated: Boolean

    """Filter by target achievement status"""
    isTargetAchieved: Boolean

    """Filter by minimum current value"""
    minCurrentValue: Float

    """Filter by maximum current value"""
    maxCurrentValue: Float

    """Filter by minimum target value"""
    minTargetValue: Float

    """Filter by maximum target value"""
    maxTargetValue: Float

    """Filter by minimum achievement percentage"""
    minAchievementPercentage: Float

    """Filter by maximum achievement percentage"""
    maxAchievementPercentage: Float

    """Filter by last calculated from (ISO format)"""
    lastCalculatedFrom: String

    """Filter by last calculated to (ISO format)"""
    lastCalculatedTo: String

    """Search term"""
    searchTerm: String
}

# ============================================================================
# QUERIES
# ============================================================================

extend type Query {
    """
    Get a campaign metric by ID.
    """
    campaignMetric(metricId: ID!): CampaignMetricOutput

    """
    Search campaign metrics with filters.
    """
    campaignMetrics(
        """Pagination parameters"""
        pageable: PageInput!

        """Filter options"""
        input: MetricQueryInput!
    ): CampaignMetricPage!

    """
    Get metrics by campaign.
    """
    campaignMetricsByCampaign(
        """Pagination parameters"""
        pageable: PageInput!

        """Campaign ID"""
        campaignId: ID!
    ): CampaignMetricPage!

    """
    Get achieved metrics for a campaign.
    """
    achievedCampaignMetrics(
        """Pagination parameters"""
        pageable: PageInput!

        """Campaign ID"""
        campaignId: ID!
    ): CampaignMetricPage!

    """
    Get not achieved metrics for a campaign.
    """
    notAchievedCampaignMetrics(
        """Pagination parameters"""
        pageable: PageInput!

        """Campaign ID"""
        campaignId: ID!
    ): CampaignMetricPage!

    """
    Get automated metrics for a campaign.
    """
    automatedCampaignMetrics(
        """Pagination parameters"""
        pageable: PageInput!

        """Campaign ID"""
        campaignId: ID!
    ): CampaignMetricPage!

    """
    Get recently updated metrics.
    """
    recentlyCampaignUpdatedMetrics(
        """Pagination parameters"""
        pageable: PageInput!

        """From date (ISO format)"""
        fromDate: String
    ): CampaignMetricPage!

    """
    Get metric statistics for a campaign.
    """
    campaignMetricStatistics(campaignId: ID!): MetricStatistics!
}

# ============================================================================
# MUTATIONS
# ============================================================================

extend type Mutation {
    """
    Create a new campaign metric.
    """
    createMetric(input: CreateMetricInput!): CampaignMetricOutput!

    """
    Update a campaign metric general information.
    """
    updateGeneralInfoMetric(input: UpdateMetricInput!): CampaignMetricOutput!

    """
    Update metric value.
    """
    updateMetricValue(input: UpdateMetricValueInput!): CampaignMetricOutput!

    """
    Mark metric as automated.
    """
    markAsAutomated(metricId: ID!): CampaignMetricOutput!

    """
    Delete a campaign metric.
    """
    deleteMetric(metricId: ID!): Boolean!
}